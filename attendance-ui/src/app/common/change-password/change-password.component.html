<div class="body">
  <div class="from-container">
    <form>
      <div class="container">
        <div class="row justify-content-center align-items-center">
          <div>
            <div class="rounded-4 border border-light border-3 p-4 p-md-5 bg-white">
              <form [formGroup]="passwordDetails">
                <h5 class="text-center mb-4">Change Password</h5>

                <label class="mt-3">New Password</label>
                <div class="password-input-container">
                  <input type="{{ passwordVisibility ? 'text' : 'password' }}" formControlName="newPassword"
                    class="form-control password-input" name="newPassword" placeholder="New Password" />
                  <i class="fa eye-icon" [ngClass]="passwordVisibility ? 'fa-eye-slash' : 'fa-eye'"
                    (click)="togglePasswordVisibility()"></i>
                </div>


                <div *ngIf="passwordDetails.get('newPassword').invalid && passwordDetails.get('newPassword').touched"
                  class="text-danger">
                  <small>Please enter a valid new strong password</small>
                </div>
                <div *ngFor="let suggestion of passwordStrengthSuggestions" class="text-danger">
                  <small>{{ suggestion }}</small>
                </div>

                <label class="mt-3">Confirm Password</label>
                <div class="password-input-container">
                  <input type="{{ confirmPasswordVisibility ? 'text' : 'password' }}" formControlName="confirmPassword"
                    class="form-control password-input" name="confirmPassword" placeholder="Confirm Password" />
                  <i class="fa eye-icon" [ngClass]="confirmPasswordVisibility ? 'fa-eye-slash' : 'fa-eye'" (click)="toggleConfirmPasswordVisibility()"></i>
                </div>
                
                <div *ngIf="passwordDetails.hasError('mismatch') && passwordDetails.get('confirmPassword').touched"
                  class="text-danger">
                  <small>Passwords do not match</small>
                </div>

                <button class="btn btn-warning text-light mt-5 mx-auto w-100"
                  (click)="changePassword(passwordDetails.value)" [disabled]="!isChangePasswordEnabled()">
                  Change password
                </button>

              </form>
            </div>
          </div>

        </div>
      </div>